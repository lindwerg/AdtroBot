---
phase: 13-image-generation
plan: 02
type: execute
wave: 2
depends_on: ["13-01"]
files_modified:
  - assets/images/welcome.png
  - assets/images/zodiac/*.png
  - assets/images/tarot/*.png
  - assets/images/natal_chart.png
  - assets/images/paywall.png
autonomous: false

must_haves:
  truths:
    - "Welcome screen изображение готово"
    - "12 изображений знаков зодиака готовы в едином стиле"
    - "2 изображения для таро раскладов готовы (three_card, celtic_cross)"
    - "Изображения для натальной карты и paywall готовы"
    - "Все изображения в мистическом стиле с золотыми акцентами"
  artifacts:
    - path: "assets/images/welcome.png"
      provides: "Welcome screen image"
    - path: "assets/images/zodiac/aries.png"
      provides: "Aries zodiac image"
    - path: "assets/images/zodiac/taurus.png"
      provides: "Taurus zodiac image"
    - path: "assets/images/zodiac/gemini.png"
      provides: "Gemini zodiac image"
    - path: "assets/images/zodiac/cancer.png"
      provides: "Cancer zodiac image"
    - path: "assets/images/zodiac/leo.png"
      provides: "Leo zodiac image"
    - path: "assets/images/zodiac/virgo.png"
      provides: "Virgo zodiac image"
    - path: "assets/images/zodiac/libra.png"
      provides: "Libra zodiac image"
    - path: "assets/images/zodiac/scorpio.png"
      provides: "Scorpio zodiac image"
    - path: "assets/images/zodiac/sagittarius.png"
      provides: "Sagittarius zodiac image"
    - path: "assets/images/zodiac/capricorn.png"
      provides: "Capricorn zodiac image"
    - path: "assets/images/zodiac/aquarius.png"
      provides: "Aquarius zodiac image"
    - path: "assets/images/zodiac/pisces.png"
      provides: "Pisces zodiac image"
    - path: "assets/images/tarot/three_card.png"
      provides: "Three card spread image"
    - path: "assets/images/tarot/celtic_cross.png"
      provides: "Celtic Cross spread image"
    - path: "assets/images/natal_chart.png"
      provides: "Natal chart image"
    - path: "assets/images/paywall.png"
      provides: "Paywall/premium image"
  key_links: []
---

<objective>
Сгенерировать все 17 изображений и верифицировать качество

Purpose: Получить готовые визуалы для интеграции в бот (Phase 14)
Output: 17 PNG файлов в assets/images/ в едином мистическом стиле
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-image-generation/13-CONTEXT.md
@.planning/phases/13-image-generation/13-RESEARCH.md
@.planning/phases/13-image-generation/13-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Запустить генерацию изображений</name>
  <files>assets/images/**/*.png</files>
  <action>
1. Проверить что TOGETHER_API_KEY установлен:
   ```bash
   python -c "import os; assert os.environ.get('TOGETHER_API_KEY'), 'TOGETHER_API_KEY not set'"
   ```
   Если не установлен — остановиться и сообщить пользователю (user_setup gate).

2. Запустить скрипт генерации:
   ```bash
   cd /Users/kirill/Desktop/AdtroBot
   python scripts/generate_images.py
   ```

3. Мониторить вывод скрипта. Ожидаемые логи:
   - "Generating welcome.png..."
   - "Generating zodiac/aries.png..." (и далее 11 знаков)
   - "Generating tarot/three_card.png..."
   - "Generating tarot/celtic_cross.png..."
   - "Generating natal_chart.png..."
   - "Generating paywall.png..."
   - "Done! Generated 17 images."

4. Ожидаемое время: ~2 минуты (17 изображений * 2 сек delay + генерация)

5. При ошибках API скрипт автоматически делает retry (3 попытки, 5 сек delay):
   - Rate limit (429): retry
   - Timeout: retry
   - Auth error: fatal — требуется проверить TOGETHER_API_KEY

6. После завершения проверить количество файлов:
   ```bash
   find assets/images -name "*.png" | wc -l
   ```
   Результат должен быть 17.

7. Проверить размеры файлов (не corrupted):
   ```bash
   find assets/images -name "*.png" -size +50k | wc -l
   ```
   Результат должен быть 17 (все файлы >50KB).

**Список генерируемых файлов (17 штук):**
- assets/images/welcome.png
- assets/images/zodiac/aries.png
- assets/images/zodiac/taurus.png
- assets/images/zodiac/gemini.png
- assets/images/zodiac/cancer.png
- assets/images/zodiac/leo.png
- assets/images/zodiac/virgo.png
- assets/images/zodiac/libra.png
- assets/images/zodiac/scorpio.png
- assets/images/zodiac/sagittarius.png
- assets/images/zodiac/capricorn.png
- assets/images/zodiac/aquarius.png
- assets/images/zodiac/pisces.png
- assets/images/tarot/three_card.png (3-карточный расклад)
- assets/images/tarot/celtic_cross.png (Celtic Cross расклад)
- assets/images/natal_chart.png
- assets/images/paywall.png
  </action>
  <verify>
- `find assets/images -name "*.png" | wc -l` возвращает 17
- `ls -la assets/images/zodiac/*.png | wc -l` возвращает 12
- `find assets/images -name "*.png" -size +50k | wc -l` возвращает 17 (все файлы >50KB)
  </verify>
  <done>17 PNG файлов созданы в assets/images/, все файлы валидны (>50KB)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>17 AI-сгенерированных изображений для бота в едином мистическом стиле</what-built>
  <how-to-verify>
1. Открыть `assets/images/welcome.png` — должен быть золотой зодиакальный круг на космическом фоне

2. Просмотреть все 12 знаков зодиака в `assets/images/zodiac/`:
   - Каждый знак имеет свой символ (глиф)
   - Стиль единый: золото на темно-фиолетовом космосе
   - Текст отсутствует на изображениях

3. Проверить таро в `assets/images/tarot/`:
   - three_card.png: 3 карты рубашкой вверх
   - celtic_cross.png: 10 карт в форме креста

4. Проверить спецэкраны:
   - natal_chart.png: астрологическое колесо с домами
   - paywall.png: золотой замок/ключ

5. Оценить качество:
   - Детализация высокая
   - Нет артефактов/размытия
   - Стиль консистентный между изображениями
  </how-to-verify>
  <resume-signal>
Варианты ответа:
- "approved" — все изображения ОК, продолжаем
- "regenerate [список]" — нужно перегенерировать указанные изображения (с уточнением что не так)
- "adjust style" — нужна корректировка стиля (опишите что изменить)
  </resume-signal>
</task>

</tasks>

<verification>
1. Все 17 PNG файлов существуют в assets/images/
2. Размер каждого файла >50KB (валидные изображения)
3. Изображения открываются в просмотрщике без ошибок
4. Визуальный стиль единый: космос, золото, мистика
5. Отсутствует текст на изображениях
</verification>

<success_criteria>
- 17 PNG файлов созданы и валидны
- Все изображения в едином мистическом стиле
- Пользователь подтвердил качество визуалов
- Изображения готовы к интеграции в Phase 14
</success_criteria>

<output>
After completion, create `.planning/phases/13-image-generation/13-02-SUMMARY.md`
</output>
