# Phase 2: Bot Core + Onboarding - Context

**Gathered:** 2026-01-22
**Status:** Ready for planning

<domain>
## Phase Boundary

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ /start, —É–∫–∞–∑–∞—Ç—å –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è, –ø–æ–ª—É—á–∏—Ç—å immediate value (–ø–µ—Ä–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑), –∏ —É–≤–∏–¥–µ—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –±–∞–∑–æ–≤–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.

**Scope:** Telegram webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, FSM –¥–ª—è onboarding, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î, –ø–µ—Ä–≤—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, reply keyboard –º–µ–Ω—é.

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ (Phase 3) –∏ —Ç–∞—Ä–æ (Phase 4) —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî –≤ —ç—Ç–æ–π —Ñ–∞–∑–µ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ onboarding flow.

</domain>

<decisions>
## Implementation Decisions

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

**–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (/start):**
- –†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: –∏–º—è –±–æ—Ç–∞ + —á—Ç–æ —É–º–µ—é (–≥–æ—Ä–æ—Å–∫–æ–ø—ã, —Ç–∞—Ä–æ, AI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, freemium –º–æ–¥–µ–ª—å)
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤–≤–æ–¥—É –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
- Tone: value-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Ñ–æ–∫—É—Å –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—é (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Ö–æ—Ç–µ—Ç—å –Ω–∞—á–∞—Ç—å)

**Returning user (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π /start):**
- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Äî —Å—Ä–∞–∑—É –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ù–∏–∫–∞–∫–∏—Ö "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º" —Å–æ–æ–±—â–µ–Ω–∏–π

### –°–±–æ—Ä –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è

**–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞:**
- –¢–µ–∫—Å—Ç: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –¥–∞—Ç—É (DD.MM.YYYY, DD/MM/YYYY, DD-MM-YYYY, "15 –º–∞—Ä—Ç–∞ 1990")
- –û—á–µ–Ω—å –≥–∏–±–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥: –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ü—Ä–∏ –æ—à–∏–±–∫–µ: –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑" + –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–± –æ—à–∏–±–∫–µ ‚Äî –∫—Ä–∞—Ç–∫–æ—Å—Ç—å
- –ü–∞—Ä—Å–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —à–∏—Ä–æ–∫–æ, –Ω–æ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ–º "–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è –ø–æ–Ω—è–ª?")

**–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –¥–∞—Ç—ã:**
- "–¢–≤–æ–π –∑–Ω–∞–∫: ‚ôà –û–≤–µ–Ω" (–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –¥–∞—Ç–µ)
- –°—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ immediate value

### Immediate value –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º:**
- –ì–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ—Å–ª–µ –≥–æ—Ä–æ—Å–∫–æ–ø–∞: teaser —Ç–∞—Ä–æ ("–•–æ—á–µ—à—å –∫–∞—Ä—Ç—É –¥–Ω—è? –ù–∞–∂–º–∏ 'üé¥ –¢–∞—Ä–æ'")
- –°—Ä–∞–∑—É –ø–æ—Å–ª–µ ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (reply keyboard)

**–ò—Å—Ç–æ—á–Ω–∏–∫ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:**
- Claude's discretion ‚Äî –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è Phase 2 (—Ö–∞—Ä–¥–∫–æ–¥, external API, –∏–ª–∏ mock)

### –ú–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é:**
- Reply keyboard (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞)
- 4 –∫–Ω–æ–ø–∫–∏ –≤ —Å–µ—Ç–∫–µ 2x2:
  ```
  ‚ôà –ì–æ—Ä–æ—Å–∫–æ–ø  |  üé¥ –¢–∞—Ä–æ
  üíé –ü–æ–¥–ø–∏—Å–∫–∞ |  üë§ –ü—Ä–æ—Ñ–∏–ª—å
  ```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ Phase 2:**
- Claude's discretion ‚Äî —Ä–µ—à–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ì–æ—Ä–æ—Å–∫–æ–ø" –∏ "–¢–∞—Ä–æ" (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏–ª–∏ teaser)
- "–ü–æ–¥–ø–∏—Å–∫–∞" –∏ "–ü—Ä–æ—Ñ–∏–ª—å" ‚Äî teasers –∏–ª–∏ –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Claude's Discretion

- –¢–æ—á–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (tone: –∫–æ–Ω–≤–µ—Ä—Å–∏—è-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —É–ø–æ–º—è–Ω—É—Ç—å freemium)
- –ò—Å—Ç–æ—á–Ω–∏–∫ –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –¥–ª—è immediate value (mock, external API, –∏–ª–∏ hardcoded)
- Behaviour –∫–Ω–æ–ø–æ–∫ "–ì–æ—Ä–æ—Å–∫–æ–ø" –∏ "–¢–∞—Ä–æ" –≤ Phase 2 (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∏–ª–∏ teaser "—Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ")
- FSM state management (–∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å onboarding flow)
- Error handling –∏ edge cases (network failures, database errors, –∏ —Ç.–¥.)

</decisions>

<specifics>
## Specific Ideas

- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ immediate value:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å value (–≥–æ—Ä–æ—Å–∫–æ–ø) –°–†–ê–ó–£ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Äî –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤
- **Teaser —Ç–∞—Ä–æ –ø–æ—Å–ª–µ –≥–æ—Ä–æ—Å–∫–æ–ø–∞:** "–•–æ—á–µ—à—å –∫–∞—Ä—Ç—É –¥–Ω—è? –ù–∞–∂–º–∏ 'üé¥ –¢–∞—Ä–æ'" ‚Äî –ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞–µ–º –∫ exploration
- **–ì–∏–±–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç:** –ü—Ä–∏–Ω–∏–º–∞–µ–º –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç (DD.MM.YYYY, "15 –º–∞—Ä—Ç–∞ 1990", –∏ —Ç.–¥.) ‚Äî –º–∏–Ω–∏–º—É–º friction

</specifics>

<deferred>
## Deferred Ideas

**Phase 8 (Premium Tarot + Natal):**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –∏ –∫–∞—Ä—Ç—ã –¥–Ω—è —á–µ—Ä–µ–∑ –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è + –≥–æ—Ä–æ–¥/—Ä–µ–≥–∏–æ–Ω –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
- AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–±–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞), –Ω–æ —Ä–∞–∑–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥–∞—á–∏

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º—è –∏ –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è ‚Äî —ç—Ç–æ premium —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –í Phase 2 –ø–æ–∫–∞–∑—ã–≤–∞–µ–º generic –≥–æ—Ä–æ—Å–∫–æ–ø (—Ç–æ–ª—å–∫–æ –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞), –∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–∞—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É –∏–¥—ë—Ç –≤ Phase 8 –≤–º–µ—Å—Ç–µ —Å –ø—Ä–µ–º–∏—É–º —Ç–∞—Ä–æ.

</deferred>

---

*Phase: 02-bot-core-onboarding*
*Context gathered: 2026-01-22*
