---
created: 2026-01-23T19:57
title: Улучшить натальную карту - визуал, интерпретация, монетизация
area: ui
files:
  - src/services/astrology/natal_svg.py:_generate_svg
  - src/bot/handlers/natal.py:show_natal_chart
  - src/services/ai/prompts.py:NatalChartPrompt
---

## Problem

**Визуальное качество:** Текущая натальная карта выглядит простовато, не соответствует профессиональным стандартам. Пользователь предоставил скриншот текущей карты и примеры профессиональных сервисов (astro-seek.com, astrozet.net).

**Проблемы:**
1. **Дизайн карты:** Визуал "некрасивый", не хватает деталей, цветов, градиентов, которые есть в профессиональных сервисах
2. **Клик по карте:** При нажатии на карту ничего не происходит - нужно показывать сообщение про гороскоп на сегодня (ссылка на персональный гороскоп)
3. **Интерпретация:** Текущая интерпретация недостаточно полная - нужен максимально детальный разбор личности (чтобы оправдать цену)
4. **Монетизация:** Сейчас интерпретация бесплатна для premium - нужен платный доступ именно к развернутой интерпретации личности за 199₽
5. **Ценообразование:** Нужно рассчитать экономику и оптимальную цену

**Текущее состояние:**
- Визуал: простые круги, базовые цвета, минимализм (natal_svg.py:112-290)
- Интерпретация: 1000-1500 слов через NatalChartPrompt
- Монетизация: нет отдельной платы за интерпретацию
- При клике: только просмотр карты, нет взаимодействия

## Solution

**1. Визуал (natal_svg.py):**
- Изучить профессиональные примеры (astro-seek.com, astrozet.net)
- Добавить градиенты, улучшить цветовую схему
- Добавить больше астрологических деталей (деканы, термы, ретроградность)
- Улучшить типографику, иконки планет
- Возможно использовать готовые символы вместо аббревиатур

**2. Клик по карте (natal.py):**
- Добавить callback_query handler для карты
- При клике показывать: "Подробности на сегодняшний день по натальной карте вы можете посмотреть в вашем личном гороскопе"
- Кнопка перехода в персональный гороскоп

**3. Интерпретация (prompts.py):**
- Расширить NatalChartPrompt до максимальной глубины
- Добавить разделы: характер, таланты, слабости, карьера, отношения, здоровье, предназначение
- Целевой объем: 3000-5000 слов (вместо 1000-1500)
- Сделать "прорывную ценность" для оправдания цены

**4. Платный доступ (новая модель + обработчики):**
- Создать NatalInterpretationPurchase model (user_id, purchased_at, price)
- Бесплатно показывать только карту PNG + краткое описание (300 слов)
- Полная интерпретация за 199₽ (или рассчитанную цену)
- YooKassa платеж для разовой покупки

**5. Расчет цены:**
- AI cost: GPT-4o-mini ~$0.15/1M input tokens, ~$0.60/1M output tokens
- Полная интерпретация ~5000 слов = ~6500 tokens output
- Стоимость AI: ~$0.004 за интерпретацию
- Целевая маржа: 98%+
- Предлагаемые цены: 199₽, 299₽, 399₽ (A/B тест)
- Рекомендация: начать с 199₽, потом увеличить до 299₽

**Приоритет:** MEDIUM - улучшение UX и новый revenue stream
